<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:shiro="http://shiro.apache.org/tags"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:composite="http://java.sun.com/jsf/composite" lang="es">
<h:head>
    <meta charset="utf-8" />
    <script name="jquery/jquery.js" library="primefaces"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Reportes</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    </meta>
    <link rel="stylesheet" type="text/css" href="resources/css/login.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Arvo" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <link href="resources/img/tabicon.svg" rel="icon" />
    <title>CEGA</title>
</h:head>


<h:body class="my-login-page">
    <body style = "background:#005A80">

    </body>
    <br></br>
    <div style="padding:30px; width:100%; background:#4169E1; color:white; font-size:500%;">
        <center>CEGA</center>
    </div>
    <br></br>


    <section class="h-200" style="margin:auto ; padding:130px">
        <div class="container h-200">
            <div class="row justify-content-md-center h-200">
                <div class="card-wrapper">

                    <div class="card fat">
                        <div class="card-body">
                            <h1 class="card-title" style="text-align: center ; font-size:450%">Reportes</h1>
                            <h:form class="my-login-validation" id="formulario">
                                <div class="form-group">


                                    <h1>Necesidades</h1>
                                    <p:dataTable id = "necesidades" value="#{NecesidadBean.consultarNombresNecesidadGeneral()}" var="necesidad" border="2">
                                        <p:column>
                                            <f:facet name="header" >Id</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{necesidad.id}" />

                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Nombre</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{necesidad.nombre}" />
                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Categoria</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{CategoriaBean.consultarCategoriaPorId(necesidad.categoria_id)}" />

                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">Descripcion </f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{necesidad.descripcion}" />

                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">Urgencia </f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{necesidad.urgencia}" />

                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Estado</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{necesidad.estado}" />

                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">Usuario</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{NecesidadBean.consultarNombreUsuarioPorCorreo(necesidad.usuario_id)}" />

                                        </p:column>


                                    </p:dataTable>


                                    <h5>Guardar como: </h5>
                                    <h:commandLink class="m-3" title="Pdf" >
                                        <p:graphicImage value="./icons/pdf.png" style="width:50px; height:50px;" />
                                        <p:dataExporter type="pdf" target="necesidades" fileName="ReporteNecesidades"  />
                                    </h:commandLink>
                                    <h:commandLink class="m-3" title="Excel">
                                        <p:graphicImage value="./icons/excel.png" style="width:50px; height:50px;" />
                                        <p:dataExporter type="xls" postProcessor="#{NecesidadBean.postProcessXLS}"
                                                        target="necesidades" fileName="ReporteNecesidades" />
                                    </h:commandLink>
                                    <br/>
                                    <br/>
                                    <br/>


                                    <h1>Ofertas</h1>
                                    <p:dataTable id="ofertas" value="#{OfertaBean.getOfertasObjeto()}" var="oferta" border="2">
                                    <p:column>
                                        <f:facet name="header">Id</f:facet>
                                        <h:outputText class="text-center mx-auto" value="#{oferta.id}" />

                                    </p:column>
                                        <p:column>
                                            <f:facet name="header">nombre</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{oferta.nombre}" />

                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Categoria</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{CategoriaBean.consultarCategoriaPorId(oferta.categoria_id)}" />

                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Descripcion</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{oferta.descripcion}" />

                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Estado</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{oferta.estado}" />

                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Usuario</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{NecesidadBean.consultarNombreUsuarioPorCorreo(oferta.usuario_id)}" />

                                        </p:column>

                                    </p:dataTable>
                                    <h5>Guardar como: </h5>
                                    <h:commandLink class="m-3" title="Pdf">
                                        <p:graphicImage value="./icons/pdf.png" style="width:50px; height:50px;" />
                                        <p:dataExporter type="pdf" target="ofertas" fileName="ReporteOfertas" />
                                    </h:commandLink>
                                    <p:commandLink class="m-3" title="Excel">
                                        <p:graphicImage value="./icons/excel.png" style="width:50px; height:50px;" />
                                        <p:dataExporter type="xls" postProcessor="#{OfertaBean.postProcessXLS}"
                                                        target="ofertas" fileName="ReporteOfertas" />
                                    </p:commandLink>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <h1>Respuestas</h1>
                                    <p:dataTable id="respuestas" value="#{RespuestaBean.respuestas}" var="respuesta" border="2">
                                        <p:column>
                                            <f:facet name="header">Id</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{respuesta.id}" />

                                        </p:column>
                                    <p:column>
                                        <f:facet name="header">Nombre</f:facet>
                                        <h:outputText class="text-center mx-auto" value="#{respuesta.nombre}" />

                                    </p:column>
                                        <p:column>
                                            <f:facet name="header">Comentario</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{respuesta.comentario}" />

                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">Oferta</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{OfertaBean.consultarNombreOfertaPorId(respuesta.oferta_id)}" />



                                        </p:column>

                                        <p:column>
                                            <f:facet name="header">Necesidad</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{NecesidadBean.consultarNombreNecesidadPorId(respuesta.necesidad_id)}" />

                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">Usuario</f:facet>
                                            <h:outputText class="text-center mx-auto" value="#{NecesidadBean.consultarNombreUsuarioPorCorreo(respuesta.usuario_id)}" />

                                        </p:column>
                                    </p:dataTable>
                                    <h5>Guardar como: </h5>
                                    <h:commandLink class="m-3" title="Pdf">
                                        <p:graphicImage value="./icons/pdf.png" style="width:50px; height:50px;" />
                                        <p:dataExporter type="pdf" target="respuestas" fileName="ReporteRespuestas" />
                                    </h:commandLink>
                                    <h:commandLink class="m-3" title="Excel">
                                        <p:graphicImage value="./icons/excel.png" style="width:50px; height:50px;" />
                                        <p:dataExporter type="xls" postProcessor="#{RespuestaBean.postProcessXLS}"
                                                        target="respuestas" fileName="ReporteRespuestas" />
                                    </h:commandLink>


                                </div>
                            </h:form>



                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script src="resources/js/my-login.js"></script>

</h:body>


</html>